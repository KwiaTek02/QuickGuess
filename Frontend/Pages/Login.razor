@page "/login"
@using Frontend.Services
@inject NavigationManager Navigation
@inject IAuthService AuthService

<div class="fullscreen-bg">
    <div class="login-card enhanced">
        <h2 class="login-title">Logowanie</h2>

        @if (!string.IsNullOrWhiteSpace(Error))
        {
            <p class="error">@Error</p>
        }

        <div class="input-wrapper">
            <i class="bi bi-envelope-fill input-icon"></i>
            <InputText class="input-field" @bind-Value="Email" placeholder="Email" />
        </div>

        <div class="input-wrapper">
            <i class="bi bi-lock-fill input-icon"></i>
            <InputText class="input-field" @bind-Value="Password" placeholder="Hasło" type="password" />
        </div>

        <div class="auth-links left-align">
            <a href="#">Zapomniałeś hasła?</a>
        </div>
1
        <button @onclick="LoginUser" class="btn login-btn">Zaloguj się</button>

        <div class="google-btn-wrapper">
            <button class="google-btn">
                <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google" class="google-icon" />
                Zaloguj się przez Google
            </button>
        </div>

        <div class="auth-links center-row">
            <span>Nie masz konta?</span>
            <a href="/register" style="margin-left: 0.4rem;">Zarejestruj się</a>
        </div>
    </div>
</div>

@code {
    string Email = "";
    string Password = "";
    string Error = "";

    private async Task LoginUser()
    {
        var success = await AuthService.Login(Email, Password);
        if (!success)
        {
            Error = "Niepoprawne dane logowania lub email niezweryfikowany.";
        }
        else
        {
            Navigation.NavigateTo("/panel");
        }
    }
}