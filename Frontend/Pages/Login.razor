@page "/login"
@using Frontend.Services
@inject NavigationManager Navigation
@inject IAuthService AuthService

<h2 class="text-2xl font-bold mb-4">Logowanie</h2>

@if (!string.IsNullOrWhiteSpace(Error))
{
    <p class="text-red-500">@Error</p>
}

<div class="space-y-4">
    <input class="w-full border p-2" placeholder="Email" @bind="Email" />
    <input class="w-full border p-2" type="password" placeholder="Hasło" @bind="Password" />
    <button class="bg-blue-600 text-white px-4 py-2 rounded" @onclick="LoginUser">Zaloguj się</button>
</div>

@code {
    string Email = "";
    string Password = "";
    string Error = "";

    private async Task LoginUser()
    {
        var success = await AuthService.Login(Email, Password);
        if (!success)
        {
            Error = "Niepoprawne dane logowania lub email niezweryfikowany.";
        }
        else
        {
            Navigation.NavigateTo("/panel");
        }
    }
}