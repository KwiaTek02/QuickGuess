@page "/register"
@using Frontend.Services
@inject NavigationManager Navigation
@inject IAuthService AuthService

<h2 class="text-2xl font-bold mb-4">Rejestracja</h2>

@if (!string.IsNullOrWhiteSpace(Error))
{
    <p class="text-red-500">@Error</p>
}

<div class="space-y-4">
    <input class="w-full border p-2" placeholder="Nazwa użytkownika" @bind="Username" />
    <input class="w-full border p-2" placeholder="Email" @bind="Email" />
    <input class="w-full border p-2" type="password" placeholder="Hasło" @bind="Password" />
    <button class="bg-green-600 text-white px-4 py-2 rounded" @onclick="RegisterUser">Zarejestruj się</button>
</div>

@code {
    string Username = "";
    string Email = "";
    string Password = "";
    string Error = "";

    private async Task RegisterUser()
    {
        var success = await AuthService.Register(Username, Email, Password);
        if (!success)
        {
            Error = "Nie udało się zarejestrować. Sprawdź dane.";
        }
        else
        {
            Navigation.NavigateTo("/");
        }
    }
}